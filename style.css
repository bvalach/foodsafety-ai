/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=JetBrains+Mono:wght@400;500&display=swap');

/* Design tokens - Violet tech palette */
:root{
  --bg: #fafaf9;
  --bg-2:#ffffff;
  --bg-glass: rgba(255, 255, 255, 0.85);
  --bg-glass-strong: rgba(255, 255, 255, 0.95);
  --text:#1f1a2e;
  --text-secondary:#4c4567;
  --muted:#7c7494;
  --accent:#6d28d9;
  --accent-2:#8b5cf6;
  --accent-3:#a78bfa;
  --accent-light:#ede9fe;
  --accent-gradient: linear-gradient(135deg, #6d28d9 0%, #8b5cf6 100%);
  --accent-gradient-soft: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
  --border:#e4e0f0;
  --border-light:#f3f1f8;
  --radius:16px;
  --radius-sm:10px;
  --radius-lg:28px;
  --radius-full:9999px;
  --shadow-sm:0 2px 8px rgba(109, 40, 217, 0.06);
  --shadow-md:0 8px 32px rgba(109, 40, 217, 0.1);
  --shadow-lg:0 16px 48px rgba(109, 40, 217, 0.14);
  --shadow-float:0 24px 64px rgba(109, 40, 217, 0.18);
  --space-1:.25rem;
  --space-2:.5rem;
  --space-3:.75rem;
  --space-4:1rem;
  --space-5:1.5rem;
  --space-6:2rem;
  --space-7:3rem;
  --space-8:4rem;
  --transition: all .3s cubic-bezier(.4, 0, .2, 1);
  --transition-bounce: all .4s cubic-bezier(.34, 1.56, .64, 1);
  --transition-fast: all .15s cubic-bezier(.4, 0, .2, 1);
}

/* Global */
*{box-sizing:border-box}
html,body{height:100%; scroll-behavior:smooth}
body{
  margin:0;
  font-family:'DM Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color:var(--text);
  background: 
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(109, 40, 217, 0.06) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 100% 100%, rgba(139, 92, 246, 0.04) 0%, transparent 50%),
    linear-gradient(180deg, var(--bg), #f5f3f9 100%);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  overflow-x:hidden
}

h1,h2,h3{font-family:'DM Sans', sans-serif; margin:0 0 var(--space-4) 0; color:var(--text)}
h1{font-weight:800; font-size:clamp(2.2rem, 5vw, 3.5rem); letter-spacing:-0.03em; line-height:1.1}
h2{font-weight:700; font-size:clamp(1.3rem, 2.5vw, 1.6rem); letter-spacing:-0.02em}
h3{font-weight:600; font-size:1.15rem; letter-spacing:-0.01em}

header{
  background: 
    linear-gradient(135deg, #5b21b6 0%, #7c3aed 50%, #6d28d9 100%);
  color:#fff;
  padding: clamp(2.5rem, 6vw, 4.5rem) 1.5rem;
  text-align:center;
  position:relative;
  overflow:hidden;
  box-shadow: 0 8px 32px rgba(109, 40, 217, 0.25);
}
header::before{
  content:"";
  position:absolute;
  top:-50%; left:-50%; width:200%; height:200%;
  background: 
    radial-gradient(circle at 20% 80%, rgba(255,255,255,0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.06) 0%, transparent 40%),
    radial-gradient(circle at 40% 40%, rgba(134, 239, 172, 0.1) 0%, transparent 30%);
  animation: headerFloat 20s ease-in-out infinite;
}
@keyframes headerFloat{
  0%, 100%{transform:translate(0, 0) rotate(0deg)}
  50%{transform:translate(-2%, 2%) rotate(1deg)}
}
header::after{
  content:"";
  position:absolute;
  bottom:0; left:0; right:0;
  height:120px;
  background: linear-gradient(to top, var(--bg) 0%, transparent 100%);
  pointer-events:none;
}
header h1{
  font-weight:800;
  text-shadow: 0 4px 24px rgba(0,0,0,0.25);
  letter-spacing:-0.025em;
  margin-bottom: var(--space-3);
  position:relative;
  z-index:1;
}
header h1::after{
  content:"";
  display:block;
  width:80px; height:4px;
  background: linear-gradient(90deg, #c4b5fd, #fff);
  margin: var(--space-4) auto 0;
  border-radius:2px;
}
header h2{
  font-weight:600;
  color: rgba(255,255,255,.92);
  margin-bottom: var(--space-6);
  position:relative;
  z-index:1;
  font-family:'DM Sans', sans-serif;
  font-size: clamp(1.1rem, 2vw, 1.35rem);
  letter-spacing:0.02em;
}
header .loading-notice{
  max-width:720px;
  margin:0 auto;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border:1px solid rgba(255,255,255,0.18);
  border-radius:var(--radius-lg);
  padding:1.1rem 1.5rem;
  font-size:.9rem;
  line-height:1.65;
  position:relative;
  z-index:1;
  color: rgba(255,255,255,0.9);
}

.acknowledgement{
  max-width:680px;
  margin: var(--space-5) auto 0 auto;
  padding: 1rem 1.4rem;
  border-radius:var(--radius-lg);
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border:1px solid rgba(255,255,255,0.15);
  position:relative;
  z-index:1;
}
.acknowledgement strong{color:#ddd6fe; font-weight:600; letter-spacing:0.01em}

/* Containers */
main,
.timeline-container,
.category-filters-container,
.source-filters-container,
.data-persistence-container,
.results-summary{
  max-width:1200px;
  margin: 0 auto;
}

.timeline-container,
.category-filters-container,
.source-filters-container,
.data-persistence-container{
  margin: var(--space-7) auto;
  background:var(--bg-glass-strong);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  box-shadow: 
    var(--shadow-sm),
    0 0 0 1px rgba(21, 128, 61, 0.03) inset;
  padding: var(--space-6) var(--space-5);
  transition: var(--transition);
  position:relative;
}
.timeline-container::before,
.category-filters-container::before,
.source-filters-container::before,
.data-persistence-container::before{
  content:"";
  position:absolute;
  top:0; left:20px; right:20px;
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(109, 40, 217, 0.15), transparent);
}
.timeline-container:hover,
.category-filters-container:hover,
.source-filters-container:hover,
.data-persistence-container:hover{
  box-shadow: var(--shadow-md);
  border-color: var(--accent-light);
  transform:translateY(-2px);
}

/* Results summary */
.results-summary{
  margin: var(--space-6) auto;
  display:flex; align-items:center; justify-content:space-between;
  background:var(--bg-glass-strong);
  border:1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5) var(--space-6);
  box-shadow:var(--shadow-sm);
  position:relative;
  overflow:hidden;
}
.results-summary::before{
  content:"";
  position:absolute;
  left:0; top:0; bottom:0;
  width:4px;
  background: var(--accent-gradient);
  border-radius: var(--radius-lg) 0 0 var(--radius-lg);
}
.results-summary strong{
  font-size:1.4rem;
  color: var(--accent);
  font-weight:700;
}
.results-summary strong::before{
  content:"";
  display:inline-block;
  width:10px;
  height:10px;
  background: var(--accent-2);
  border-radius:50%;
  margin-right: var(--space-3);
  animation: pulse 2s ease-in-out infinite;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
}
@keyframes pulse{
  0%, 100%{opacity:1; transform:scale(1)}
  50%{opacity:.7; transform:scale(1.15)}
}

/* Filters */
.category-filters, .source-filters{
  display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center;
  margin-bottom: var(--space-5);
}
.category-filter-btn, .source-filter-btn, .filter-action-btn, .export-btn, #reset-timeline, #modal-link{
  border:1px solid var(--border);
  background:var(--bg-2);
  color:var(--text-secondary);
  padding:.55rem 1.1rem;
  border-radius: var(--radius-full);
  font: inherit;
  font-weight:600;
  font-size:.82rem;
  cursor:pointer;
  transition:var(--transition);
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  letter-spacing:0.01em;
}
.category-filter-btn:hover, .source-filter-btn:hover, .filter-action-btn:hover, .export-btn:hover, #reset-timeline:hover{
  transform:translateY(-2px) scale(1.02);
  border-color: var(--accent-2);
  box-shadow: 0 6px 16px rgba(21, 128, 61, 0.15);
  color:var(--accent);
}
.category-filter-btn.active, .source-filter-btn.active{
  background: var(--accent-gradient);
  color:#fff;
  border-color: transparent;
  box-shadow: 0 4px 14px rgba(21, 128, 61, 0.35);
}
.category-filter-btn.active:hover, .source-filter-btn.active:hover{
  transform:translateY(-2px) scale(1.03);
  box-shadow: 0 8px 24px rgba(21, 128, 61, 0.4);
}
.filter-actions{display:flex; gap:.7rem; justify-content:center; margin-top: var(--space-4)}

/* Timeline */
.timeline-controls{display:flex; flex-direction:column; gap:1.1rem}
.timeline-labels{display:flex; justify-content:space-between; color:var(--muted); font-weight:700; font-size:.92rem; letter-spacing:-0.01em}
.timeline-slider{position:relative; height:48px}
.timeline-slider::before{
  content:"";
  position:absolute;
  top:50%; left:0; right:0;
  transform:translateY(-50%);
  height:12px;
  background: linear-gradient(90deg, var(--border-light), #cbd5e1);
  border-radius:12px;
  z-index:0
}
.timeline-slider input[type=range]{
  position:absolute; width:100%; height:12px; background:transparent; appearance:none; pointer-events:none; z-index:2;
}
.timeline-slider input[type=range]::-webkit-slider-track{
  height:12px; border-radius:12px; background:transparent;
}
.timeline-slider input[type=range]::-webkit-slider-thumb{
  appearance:none; -webkit-appearance:none;
  height:26px; width:26px; border-radius:50%;
  background: var(--accent-gradient);
  border:3px solid #fff;
  box-shadow: 0 4px 16px rgba(21, 128, 61, 0.4), 0 0 0 5px rgba(21, 128, 61, 0.1);
  cursor:pointer; pointer-events:all;
  transition: var(--transition-fast);
  margin-top:-7px
}
.timeline-slider input[type=range]::-webkit-slider-thumb:hover{
  transform:scale(1.12);
  box-shadow: 0 6px 24px rgba(21, 128, 61, 0.5), 0 0 0 7px rgba(21, 128, 61, 0.15);
}
.timeline-selected{
  display:flex; align-items:center; justify-content:center; gap: var(--space-3);
  font-size:.92rem;
  font-weight:600;
  color:var(--text);
  background: linear-gradient(135deg, #f8faf8, #fff);
  padding: var(--space-3) var(--space-4);
  border-radius:var(--radius);
  border:1px solid var(--border);
  box-shadow: 0 2px 10px rgba(0,0,0,.04);
}

/* Grid & cards */
main{padding: var(--space-7) var(--space-4)}
#paper-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: var(--space-5);
}
.paper-card{
  background:var(--bg-glass-strong);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding: var(--space-5);
  box-shadow:var(--shadow-sm);
  transition:var(--transition-bounce);
  position:relative;
  overflow:hidden;
  cursor:pointer;
}
.paper-card::before{
  content:"";
  position:absolute;
  top:0; left:0; right:0;
  height:3px;
  background: var(--accent-gradient-soft);
  opacity:0;
  transition: opacity var(--transition-fast);
}
.paper-card::after{
  content:"";
  position:absolute;
  top:-50%; right:-50%;
  width:100%; height:100%;
  background: radial-gradient(circle, rgba(109, 40, 217, 0.03) 0%, transparent 70%);
  opacity:0;
  transition: opacity var(--transition);
}
.paper-card:hover::before{opacity:1}
.paper-card:hover::after{opacity:1}
.paper-card:hover{
  transform:translateY(-6px) scale(1.01);
  box-shadow: var(--shadow-lg);
  border-color: var(--accent-light);
}
.paper-card h3{
  font-size:1.05rem; font-weight:700; margin:0 0 var(--space-3) 0; line-height:1.45;
  display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp: 2; overflow:hidden;
  color:var(--text);
  transition: color var(--transition-fast);
  font-family:'DM Sans', sans-serif;
}
.paper-card:hover h3{color: var(--accent)}
.paper-card .meta{
  display:flex; align-items:center; justify-content:space-between;
  color:var(--muted); font-size:.82rem; margin-bottom:var(--space-3);
  font-weight:500;
}
.paper-card .tags{display:flex; flex-wrap:wrap; gap:.35rem; margin-top:var(--space-3)}
.tag{
  font-size:.68rem; font-weight:600; padding:.25rem .65rem; border-radius:var(--radius-full); 
  border:1px solid var(--border); background:var(--bg); color:var(--text-secondary);
  transition: var(--transition-fast);
  letter-spacing:0.02em;
}
.tag:hover{background: var(--accent-light); border-color: var(--accent-2); color: var(--accent)}
.tag.source[data-source="arXiv"]{
  background: #fefce8;
  border-color: #fde047;
  color:#854d0e
}
.tag.source[data-source="SemanticScholar"]{
  background: #eff6ff;
  border-color: #93c5fd;
  color:#1e40af
}
.tag.source[data-source="Crossref"]{
  background: #ecfeff;
  border-color: #67e8f9;
  color:#0e7490
}
.paper-doi{
  font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size:.7rem;
  color:var(--muted);
  word-break:break-all;
  margin-top:.7rem;
  padding: var(--space-2) var(--space-3);
  background: linear-gradient(135deg, #faf9fd, #f5f3f9);
  border-radius: var(--radius-sm);
  border:1px solid var(--border-light)
}

/* Modal */
.modal{display:none; position:fixed; inset:0; background:rgba(26, 31, 22, 0.8); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index:1000; animation: fadeIn .2s ease-out}
@keyframes fadeIn{from{opacity:0} to{opacity:1}}
.modal-content{
  background:#fff;
  border-radius:var(--radius-lg); width:min(720px, calc(100% - 2rem));
  margin: 5vh auto; padding: clamp(1.8rem, 4vw, 2.8rem); position:relative; 
  box-shadow:0 24px 80px rgba(26, 31, 22, 0.3);
  border:1px solid var(--border);
  animation: slideUp .25s ease-out;
  max-height:85vh;
  overflow-y:auto;
}
@keyframes slideUp{from{opacity:0; transform:translateY(24px)} to{opacity:1; transform:translateY(0)}}
.close-button{
  position:absolute; top:1.2rem; right:1.2rem; width:40px; height:40px; font-size:1.6rem;
  background:transparent; border:none; color:var(--muted);
  cursor:pointer; border-radius:50%; transition: var(--transition);
  display:flex; align-items:center; justify-content:center;
}
.close-button:hover{
  background: var(--accent-light); color: var(--accent); transform: rotate(90deg);
}
.modal-content h2{
  font-size:1.5rem; color:var(--text); margin-top:.3rem; line-height:1.4;
  margin-bottom: var(--space-4); padding-bottom: var(--space-4); 
  border-bottom:1px solid var(--border); font-weight:700;
}
.modal-content p{font-size:.95rem; color:var(--text-secondary); line-height:1.7; margin-bottom: var(--space-3)}
#modal-authors{font-weight:600; color:var(--text); font-size:.92rem}
#modal-date{color:var(--muted); font-weight:500; font-size:.85rem}
#modal-abstract{color:var(--text-secondary); line-height:1.75; text-align:justify; font-size:.93rem}
#modal-doi{
  background: linear-gradient(135deg, #faf9fd, #f5f3f9);
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  padding:.9rem; text-align:center; margin-top: var(--space-4)
}
#modal-doi a{color:var(--accent); font-weight:700; text-decoration:none; transition: var(--transition); font-size:.9rem}
#modal-doi a:hover{color:var(--accent-2)}
#modal-link{
  display:inline-block; margin-top:var(--space-5); padding: .8rem 1.8rem; background:var(--accent-gradient);
  color:#fff; text-decoration:none; font-weight:700; border-radius:var(--radius-full); font-size:.92rem;
  box-shadow: 0 4px 16px rgba(21, 128, 61, 0.3); transition: var(--transition-bounce)
}
#modal-link:hover{
  transform: translateY(-2px) scale(1.03); box-shadow: 0 8px 24px rgba(21, 128, 61, 0.4)
}

/* Persistence */
.save-status{
  margin-left:.9rem;
  font-style:italic;
  font-weight:600;
  color:var(--accent);
  background: linear-gradient(135deg, #ede9fe, #ddd6fe);
  padding:.45rem 1rem;
  border-radius:var(--radius-full);
  border:1px solid var(--accent-3);
  box-shadow: 0 3px 12px rgba(109, 40, 217, 0.15)
}

/* Footer */
footer{
  margin-top: var(--space-8);
  background: 
    linear-gradient(135deg, #5b21b6 0%, #6d28d9 50%, #5b21b6 100%);
  color:#fff;
  text-align:center;
  padding: 3.5rem 1.5rem;
  position:relative;
  overflow:hidden;
  box-shadow: 0 -8px 32px rgba(109, 40, 217, 0.25)
}
footer::before{
  content:"";
  position:absolute;
  top:-80px; left:50%; transform:translateX(-50%);
  width:900px; height:300px;
  background: radial-gradient(ellipse, rgba(255,255,255,0.08) 0%, transparent 70%);
  pointer-events:none
}
footer::after{
  content:"";
  position:absolute;
  bottom:0; left:0; right:0;
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(196, 181, 253, 0.4), transparent);
}
footer p{margin: var(--space-3) 0; font-weight:500; font-size:.95rem; position:relative; z-index:1}
footer a{color:#ddd6fe; text-decoration:none; border-bottom:1px solid rgba(255,255,255,0.25); transition: var(--transition); font-weight:600}
footer a:hover{
  color:#fff;
  border-bottom-color:#fff;
  text-shadow: 0 2px 12px rgba(0,0,0,0.3)
}

/* Skeleton loader */
.skel{
  border-radius:var(--radius-lg);
  border:1px solid var(--border);
  background:var(--bg-glass);
  padding: var(--space-5);
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.skel::before{
  content:"";
  position:absolute;
  top:0; left:0; right:0;
  height:3px;
  background: linear-gradient(90deg, var(--border-light), var(--accent-3), var(--border-light));
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite
}
.skel .bar{
  height:14px; background: linear-gradient(90deg, #e8e5f0, #f5f3f9, #e8e5f0);
  border-radius:8px; margin:.7rem 0;
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite
}
.skel .bar.title{height:22px; width:82%; margin-top:.9rem}
.skel .bar.meta{width:55%; margin-bottom:1.1rem}
.skel .bar.line{width:92%}
@keyframes shimmer{
  0%{background-position: 200% 0}
  100%{background-position: -200% 0}
}

/* A11y focus */
:focus-visible{outline: 3px solid var(--accent-3); outline-offset:3px}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important; transition:none !important}
}

/* Mobile */
@media (max-width: 640px){
  .timeline-container,
  .category-filters-container,
  .source-filters-container,
  .data-persistence-container{
    padding: var(--space-4) var(--space-3);
    margin: var(--space-5) auto;
  }
  .results-summary{
    flex-direction:column;
    gap: var(--space-3);
    text-align:center;
  }
  #paper-grid{
    grid-template-columns: 1fr;
  }
  header{
    padding: var(--space-5) var(--space-3);
  }
}
